document.addEventListener("DOMContentLoaded", () => {
  const voucherLinks = document.querySelectorAll(".voucher-link");

  // Path to the SVG logo
  const svgLogoPath = "https://raw.githubusercontent.com/villa-santiago/villa-santiago.github.io/refs/heads/main/heart.svg";

  // Path to the sound effect
  const soundEffectPath = "https://example.com/sound.wav"; // Replace with your actual sound file

  // Function to play sound
  function playSound() {
    const audio = new Audio(soundEffectPath);
    audio.play();
  }

  // Function to create confetti
  function createConfetti(x, y) {
    const confetti = document.createElement("img");
    confetti.src = svgLogoPath;
    confetti.classList.add("confetti");
    confetti.style.left = `${x}px`;
    confetti.style.top = `${y}px`;

    const angle = Math.random() * 360;
    const distance = Math.random() * 300 + 100;
    const duration = Math.random() * 1 + 1;
    const size = Math.random() * 20 + 10;
    const rotation = Math.random() * 720 - 360;

    confetti.style.setProperty("--angle", `${angle}deg`);
    confetti.style.setProperty("--distance", `${distance}px`);
    confetti.style.setProperty("--duration", `${duration}s`);
    confetti.style.setProperty("--rotation", `${rotation}deg`);
    confetti.style.width = `${size}px`;

    document.body.appendChild(confetti);

    setTimeout(() => {
      confetti.remove();
    }, duration * 1000);
  }

  // Add click event listeners to voucher links
  voucherLinks.forEach(link => {
    link.addEventListener("click", (event) => {
      event.preventDefault(); // Prevent default behavior for links
      generateConfetti(event); // Only trigger confetti for non-link elements
      playSound();
      
      // Open the link after the burst effect finishes
      setTimeout(() => {
        window.location.href = link.href; // Open the URL after the animation
      }, 1000); // Adjust the delay time as necessary to match the burst effect duration
    });
  });

  // Function to generate confetti
  function generateConfetti(event) {
    const count = 50;
    const x = event.clientX;
    const y = event.clientY;

    for (let i = 0; i < count; i++) {
      createConfetti(x, y);
    }
  }
});
